# Code Generator for Parameterized and Pipelined Wallace Tree Multiplier

This repository contains the project done on Parameterized and Pipelined Wallace Tree Multiplier as a part of the CAD for VLSI Systems(CS6230) course at IIT Madras. This repository contains the C++ code to automate the Verilog code generation for an N-bit pipelined Wallace Tree Multiplier

# How to run the code?

- Run the following commands to generate the N-bit Wallace tree multiplier circuit (with isolation register stage after every K stages) in Verilog from the C++ code. Note the file Multiplier\_gen\_pipeline.cpp is present in the Code directory

    g++ **Multiplier\_gen\_pipeline.cpp**  
    ./a.out  
    8 2  

- The code will ask the user to input the value of N and K when the user runs ./a.out. For N, you can enter any value in the power of 2. For K (>0), enter any value greater than zero, not necessarily in the powers of 2.

- After running the above commands, the **multiplier.v** file will be generated in the current directory, which is the Verilog file for the N-bit Wallace tree multiplier circuit (with isolation register stage after every K stages). N is 8, and K is 2 in this case.

- In order to run the generated Verilog files using the test benches to see the multiplication results, use the following commands.

    iverilog multiplier.v  
    iverilog **multiplier\_tb.v**  
    ./a.out

- **Note:** Carry Lookahead Adder is not pipelined while adding the pipeline stages. The pipeline stages are only added to the CSA tree.

- **Note:** There will be **many warnings generated** when the user compiles the code using the commands -> iverilog multiplier.v or iverilog multiplier\_tb.v. Please ignore those warnings that will not affect the final results.

- **Note:** The Multiplier\_gen\_pipeline.cpp is the multiplier generation code, while the multiplier.v is the self-generated Verilog code generated by Multiplier\_gen\_pipeline.cpp. The multiplier\_tb.v is the testbench file, which is written manually and is not generated by Multiplier\_gen\_pipeline.cpp.

- **Note:** The time period of the clock (clk input) has to be changed manually. This can be done from multiplier\_tb.v.

# Built in
C++, Verilog

# Features Supported

- Parameterization. Using parameter N provided during input. N-bit Wallace tree multiplier circuit will be generated
- Pipelining. Using parameter K provided during input. Isolation register stage after every K stages of circuit.

# Results

**Comparative Analysis for different values of K**

![alt text](https://github.com/Jash-Khatri/Parameterized-Multiplier/blob/main/fig1.png)

- Above figure show the number of isolation registers needed for different values of K.
- The above figure tells us that as the value of K (from 1 to 5 in this case) increases, the number of 1-bit registers needed to implement the pipeline reduces.
- This is intuitive because for K=1, we add the register stage after every CSA stage, while for K=4 we add the register stage only after every four register stages. Hence the number of the register should decrease as K increases.

**Execution time analysis for different values of K**

![alt text](https://github.com/Jash-Khatri/Parameterized-Multiplier/blob/main/fig2.png)

- Above figure show the change in the execution time for different values of K.
- For K=1,2,3 CLA with the delay of 24 units will become the bottleneck for the pipelined multiplier. Hence, the time period of the clock is set to 24 units.
- For K=4, CLA, and all 4 stages of the CSA tree are separated by the register stage. In this case, the delay in processing the input from the CSA tree(30 units) will be more than the delay of CLA (24 units). Hence, the clock is set to 30 units.
- For K=5 or above, we will not have any register stage as the K value exceeds the number of CSA stages. So, in this case we do not need to set the time period of the clock. In this cases, each multiplication operation may take as much as 60 units in worst case. 
